# Todo List App Documentation

## Project Architecture

```
+---------------------------+
|      Streamlit UI         |
|  (Frontend & Backend)     |
+------------+--------------+
             |
             v
+------------+--------------+
|    Firebase Admin SDK     |
+------------+--------------+
             |
             v
+------------+--------------+
|    Firestore Database     |
+------------+--------------+
```

## Logic Map

1. **Authentication & Connection**
   - Firebase Admin SDK authenticates using service account credentials
   - Connection is cached as a resource to avoid repeated initialization

2. **Data Flow**
   - CRUD operations for todo items and categories
   - Support for parent-child relationships with subtasks
   - Data cached for 10 minutes for performance
   - Retry mechanism with exponential backoff for API operations

3. **UI Components**
   - Add task form with priority and category selection
   - Subtask creation with visual indentation and parent-child relationships
   - Category management interface
   - Task cards grouped by priority and category
   - Statistics in sidebar (progress, priority distribution, status summary)
   - Refresh button to clear cache and reload data

## Data Model

**Todo Item**
- `id`: Document ID (auto-generated by Firestore)
- `task`: String (task description)
- `status`: String ('pending' or 'completed')
- `score`: Number (10, 7, 5, or 2 for priority)
- `category_id`: String (reference to category)
- `parent_id`: String (reference to parent task, null for main tasks)
- `level`: Number (nesting level, 0 for main tasks, 1+ for subtasks)
- `created_at`: Timestamp
- `updated_at`: Timestamp

**Category**
- `id`: Document ID (auto-generated by Firestore)
- `name`: String (category name)
- `color`: String (hex color code)
- `created_at`: Timestamp
- `updated_at`: Timestamp

## Design Decisions

1. **Firestore vs Google Sheets**
   - Firestore provides better scalability and performance
   - Document-based structure is more suitable for todo items
   - No need to manage API quotas and rate limits as with Google Sheets

2. **Caching Strategy**
   - Firebase app and Firestore client are cached as resources (persist across reruns)
   - Todo data and categories are cached for 10 minutes to reduce database reads
   - Cache is cleared after write operations to ensure data freshness

3. **Error Handling**
   - Retry mechanism with exponential backoff for transient errors
   - Detailed error messages displayed to users
   - Fallback to empty DataFrame if data loading fails

4. **UI/UX Considerations**
   - Card-based layout with visual priority and category indicators
   - Tasks grouped by priority and category for better organization
   - Subtasks visually connected to parent tasks with indentation and connecting lines
   - Progress indicators and statistics for better task management
   - Responsive design with appropriate spacing and visual hierarchy
   - Category management with color coding and easy editing

5. **Subtask Implementation**
   - Parent-child relationships tracked with parent_id field
   - Nesting level tracked to support potential multi-level nesting
   - Visual indentation and connecting lines for subtasks
   - Option to complete all subtasks when parent is completed
   - Subtasks inherit category from parent task
   - Deleting a parent task also deletes all its subtasks

## Potential Improvements

1. **Authentication**
   - Add user authentication to support multiple users
   - Implement per-user todo lists and categories

2. **Features**
   - Add due dates and reminders
   - Implement task tags within categories
   - Add search and advanced filtering capabilities
   - Add category-specific statistics and insights
   - Support for deeper nesting levels (sub-subtasks)

3. **Performance**
   - Implement pagination for large todo lists
   - Add real-time updates using Firestore listeners
   - Optimize category filtering for large datasets

4. **Deployment**
   - Set up CI/CD pipeline
   - Configure proper security rules in Firestore
   - Add backup and restore functionality for categories 